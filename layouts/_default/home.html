{{ define "main" }}
  <!-- 欢迎区域 -->
  <section class="mb-16">
    <div class="text-center">
      <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-6">
        欢迎来到 <span class="text-blue-600">亦幸小阁</span>
      </h1>
      <div class="prose prose-lg prose-slate max-w-none text-center mb-8">
        {{ .Content }}
      </div>
      <div class="flex justify-center space-x-4">
        <a href="/log" class="inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors duration-200">
          浏览日志
        </a>
        <a href="/about" class="inline-flex items-center px-6 py-3 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors duration-200">
          关于我
        </a>
      </div>
    </div>
  </section>

  <!-- 最新文章 -->
  <section class="mb-16">
    <div class="flex items-center justify-between mb-8">
      <h2 class="text-2xl font-bold text-gray-900">最新文章</h2>
      <a href="/log" class="text-blue-600 hover:text-blue-800 font-medium transition-colors duration-200">
        查看全部 →
      </a>
    </div>
    
    <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
      {{ range first 6 site.RegularPages }}
        <article class="bg-white rounded-lg border border-gray-200 hover:border-blue-300 hover:shadow-lg transition-all duration-300 overflow-hidden group">
          <div class="p-6">
            <header class="mb-4">
              <h3 class="text-lg font-semibold mb-2">
                <a href="{{ .RelPermalink }}" class="text-gray-900 group-hover:text-blue-600 transition-colors duration-200">
                  {{ .LinkTitle }}
                </a>
              </h3>
              {{ if .Date }}
                {{ $dateMachine := .Date | time.Format "2006-01-02T15:04:05-07:00" }}
                {{ $dateHuman := .Date | time.Format "01月02日" }}
                <time datetime="{{ $dateMachine }}" class="text-sm text-gray-500">
                  {{ $dateHuman }}
                </time>
              {{ end }}
            </header>
            
            {{ with .Summary }}
              <div class="prose prose-sm prose-slate max-w-none text-gray-600 mb-4 line-clamp-3">
                {{ . | truncate 120 }}
              </div>
            {{ end }}
            
            <footer class="flex items-center justify-between">
              {{ with .GetTerms "tags" }}
                <div class="flex flex-wrap gap-1">
                  {{ range first 2 . }}
                    <span class="inline-block px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded">
                      {{ .LinkTitle }}
                    </span>
                  {{ end }}
                  {{ if gt (len .) 2 }}
                    <span class="text-xs text-gray-400">+{{ sub (len .) 2 }}</span>
                  {{ end }}
                </div>
              {{ end }}
              
              <a href="{{ .RelPermalink }}" class="text-sm text-blue-600 group-hover:text-blue-800 font-medium transition-colors duration-200">
                阅读 →
              </a>
            </footer>
          </div>
        </article>
      {{ end }}
    </div>
  </section>

  <!-- 分类统计 -->
  <section class="mb-16">
    <h2 class="text-2xl font-bold text-gray-900 mb-8">内容分类</h2>
    <div class="grid gap-8 md:grid-cols-1 lg:grid-cols-2">
      {{ range site.Sections }}
        {{ if .RegularPages }}
          <div class="bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow duration-200">
            <!-- 分类头部 -->
            <div class="bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-gray-100">
              <div class="flex items-center justify-between">
                <div>
                  <h3 class="text-xl font-bold text-gray-900">{{ .Title }}</h3>
                  {{ with .Content }}
                    <p class="text-gray-600 text-sm mt-1">{{ . | truncate 80 }}</p>
                  {{ end }}
                </div>
                <div class="text-right">
                  <span class="text-3xl font-bold text-blue-600">{{ len .RegularPages }}</span>
                  <p class="text-xs text-gray-500 mt-1">篇文章</p>
                </div>
              </div>
            </div>
            
            <!-- 最新文章列表 -->
            <div class="p-6">
              <div class="space-y-3">
                {{ range first 4 .RegularPages }}
                  <div class="flex items-start justify-between py-2 border-b border-gray-100 last:border-b-0">
                    <div class="flex-1 min-w-0">
                      <a href="{{ .RelPermalink }}" class="text-gray-900 hover:text-blue-600 font-medium transition-colors duration-200 block truncate">
                        {{ .LinkTitle }}
                      </a>
                      {{ if .Date }}
                        {{ $dateHuman := .Date | time.Format "01月02日" }}
                        <span class="text-xs text-gray-500 mt-1 block">{{ $dateHuman }}</span>
                      {{ end }}
                    </div>
                    {{ with .GetTerms "tags" }}
                      {{ range first 1 . }}
                        <span class="inline-block px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded ml-2 flex-shrink-0">
                          {{ .LinkTitle }}
                        </span>
                      {{ end }}
                    {{ end }}
                  </div>
                {{ end }}
              </div>
              
              <!-- 查看全部链接 -->
              {{ if gt (len .RegularPages) 4 }}
                <div class="mt-4 pt-4 border-t border-gray-100">
                  <a href="{{ .RelPermalink }}" class="inline-flex items-center text-blue-600 hover:text-blue-800 font-medium text-sm transition-colors duration-200 w-full justify-center">
                    查看全部 {{ len .RegularPages }} 篇文章
                    <svg class="w-3 h-3 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                  </a>
                </div>
              {{ end }}
            </div>
          </div>
        {{ end }}
      {{ end }}
    </div>
  </section>

  <!-- 标签云 -->
  {{ $tags := site.Taxonomies.tags }}
  {{ if $tags }}
    <section class="mb-16">
      <h2 class="text-2xl font-bold text-gray-900 mb-8">热门标签</h2>
      <div class="flex flex-wrap gap-3">
        {{ range $name, $taxonomy := $tags }}
          {{ $count := len $taxonomy.Pages }}
          {{ $textSize := "text-sm" }}
          {{ $padding := "px-3 py-1" }}
          {{ $fontWeight := "font-normal" }}
          {{ if ge $count 15 }}
            {{ $textSize = "text-2xl" }}
            {{ $padding = "px-6 py-3" }}
            {{ $fontWeight = "font-bold" }}
          {{ else if ge $count 10 }}
            {{ $textSize = "text-xl" }}
            {{ $padding = "px-5 py-2" }}
            {{ $fontWeight = "font-semibold" }}
          {{ else if ge $count 7 }}
            {{ $textSize = "text-lg" }}
            {{ $padding = "px-4 py-2" }}
            {{ $fontWeight = "font-medium" }}
          {{ else if ge $count 4 }}
            {{ $textSize = "text-base" }}
            {{ $padding = "px-4 py-2" }}
            {{ $fontWeight = "font-medium" }}
          {{ else if ge $count 2 }}
            {{ $textSize = "text-sm" }}
            {{ $padding = "px-3 py-1" }}
            {{ $fontWeight = "font-normal" }}
          {{ else }}
            {{ $textSize = "text-xs" }}
            {{ $padding = "px-2 py-1" }}
            {{ $fontWeight = "font-light" }}
          {{ end }}
          <a href="{{ printf "/tags/%s/" $name | relURL }}" 
             class="inline-block {{ $padding }} {{ $textSize }} {{ $fontWeight }} bg-gray-100 hover:bg-blue-100 text-gray-700 hover:text-blue-700 rounded-full transition-all duration-200 hover:scale-105 hover:shadow-md">
            {{ $name }}
            <span class="text-xs opacity-75 ml-1 font-normal">({{ $count }})</span>
          </a>
        {{ end }}
      </div>
    </section>
  {{ end }}

  <!-- 最近更新 -->
  <section>
    <h2 class="text-2xl font-bold text-gray-900 mb-8">最近更新</h2>
    <div class="bg-gray-50 rounded-lg p-6">
      <div class="space-y-4">
        {{ range first 5 (sort site.RegularPages "Lastmod" "desc") }}
          <div class="flex items-center justify-between py-2 border-b border-gray-200 last:border-b-0">
            <div class="flex-1">
              <a href="{{ .RelPermalink }}" class="text-gray-900 hover:text-blue-600 font-medium transition-colors duration-200">
                {{ .LinkTitle }}
              </a>
              {{ if .Lastmod }}
                {{ $lastmod := .Lastmod | time.Format "01月02日" }}
                <span class="text-sm text-gray-500 ml-2">{{ $lastmod }}</span>
              {{ end }}
            </div>
            <div class="text-sm text-gray-400">
              {{ with .GetTerms "tags" }}
                {{ range first 1 . }}
                  {{ .LinkTitle }}
                {{ end }}
              {{ end }}
            </div>
          </div>
        {{ end }}
      </div>
    </div>
  </section>
{{ end }}